<ion-view cache-view="false" view-title="ADD NEW TAILGATE">
    <ion-nav-bar class="bar-dark" align-title="center">
        <ion-nav-buttons side="left">
            <button class="button button-icon button-clear ion-android-arrow-back back_button_css" ng-click="goBack();"></button>
        </ion-nav-buttons>
    </ion-nav-bar>
    <ion-tabs class="tabs-positive tab_bottom">
        <ion-tab title="Event Details">
            <!-- Tab 1 content -->
            <ion-content overflow-scroll="false" header="true" class='has-header has-subheader'>
                <form class="" novalidate name="tailgateForm">
                    
                    <div class="list add_my_tailgate">
                        <div style="padding:10px">
                            <div class="item-image">
                                <img ng-src="{{defaultImageUrl}}" id="myImage" class="tailgateLogoImg" ng-if="tailgateLogoId == 0"  ng-click="show();"/>
                                <img ng-src="{{tailgateLogoUrl}} " id="myImage " ng-if="tailgateLogoId>0" class="tailgateLogoImg"  ng-click="show();" />
                            </div>
                          
                        </div>
                        <div class="item item-input item-floating-label">
                            <span class="input-label">Tailgate Name</span>
                            <input type="text" placeholder="Tailgate Name" name="TailgateName" class="form-control" ng-model="addTailgateParams.tailgateName"
                                required>
                            <div ng-show="tailgateForm.$submitted || tailgateForm.TailgateName.$touched">
                                <span ng-show="tailgateForm.TailgateName.$error.required" class="error_msg">Please enter tailgate name</span>
                            </div>
                        </div>
                        <div class="item item-input item-floating-label">
                            <span class="input-label">Description:</span>
                            <input type="text" placeholder="Description" name="Description:" class="form-control" ng-model="addTailgateParams.tailgateDescription"
                                >
                        </div>
                        <div id="toaster" ng-if="tailgateCreateStatus==true"class="item toastDiv" style="text-align: center" ><i>Tailgate Added successfully</i> </div>
                        <!--<div class="item item-input item-floating-label">
                            <span class="input-label">Event Name:</span>
                            <input type="text" list="EventNameList" ng-change="loadeventData()" id="envtName" placeholder="Event Name" class="form-control"
                                ng-model="addTailgateParams.eventName" required ng-model-options="{ debounce: 500 }" autocomplete="false">
                            <datalist id="EventNameList">
                                <select>
                                    <option ng-repeat="data in eventDetails" data_id="{{data.eventId}}" value="{{data.eventName}}">{{data.eventName}}</option>
                                </select>
                            </datalist>
                        </div>-->
                        <span class="input-label" style="margin-left: 15px">Event Name</span>
                        <div class="list">
                            <label class="item item-input item-select">
                                <select id="EventNameList" ng-model="addTailgateParams.eventId" name="TailgateEventName"  ng-change="loadeventData(addTailgateParams.eventId)" ng-init="addTailgateParams.eventId = (addTailgateParams.eventId == undefined || addTailgateParams.eventId=='') ? '-1' : addTailgateParams.eventId" style="max-width: 100%;direction:inherit">
                                    <option value="-1" style="direction: inherit" >--Select Event--</option>
                                    <option style="direction: inherit" ng-repeat="data in eventDetails" value="{{data.eventId}}">{{data.eventName}}</option>

                                </select>

                            </label>
                            <div ng-show="tailgateForm.$submitted || tailgateForm.TailgateEventName.$touched">
                                <span ng-show="tailgateForm.$invalid && !tailgateForm.TailgateName.$error.required" class="error_msg" style="font-size: 16px;margin-left: 15px">Please select event</span>
                            </div>

                        </div>
                        <div class="item item-input item-floating-label">
                            <span class="input-label">Event Date</span>
                            <input type="text" class="form-control" placeholder="Event Date" ng-model="tailgateDate" name="Eventdate" disabled="disabled"
                                required>
                        </div>
                        <div class="item item-input item-floating-label item-icon-right">
                            <span class="input-label">Start Time </span>
                            <input type="time" placeholder="HH:mm:ss" class="form-control" name="startTime" ng-model="addTailgateParams.startTime" required>
                            
                        </div>
                        <div class="item item-input item-floating-label item-icon-right">
                            <span class="input-label">End Time</span>
                            <input type="time" placeholder="HH:mm:ss" class="form-control" name="endtime" ng-model="addTailgateParams.endTime"  required>
                            <div >
                                <span ng-show="invalidDate" class="error_msg">Please enter valid end time</span>
                            </div>
                        </div>

                    </div>
                    <div class="padding" align="center">
                        <button type="submit" nav-clear class="button button-block button-positive sign_in_button" ng-click="tailgateForm.$valid && addmyTailgate(addTailgateParams);">
                            Save
                        </button>
                        <a nav-clear class="button button-block button-positive sign_in_button" href="#/app/my_tailgate">
                            Cancel
                        </a>
                    </div>
                </form>
            </ion-content>
        </ion-tab>
        <ion-tab title="Location" disabled="copytTailgateId==0 || copytTailgateId==undefined" >
            <!-- Tab 2 content -->

            <ion-content overflow-scroll="false" class="has-header">
                <div style="margin-top: 44px;">
                    <div style="width:100%;height:100%;" class="add_my_tailgate">
                        <ui-gmap-google-map center="map.center" zoom="map.zoom" draggable="true" events="map.events">
                            <ui-gmap-window show="map.window.show" coords="map.window.model" options="map.window.options" closeClick="map.window.closeClick()"
                                templateParameter="map.window">
                                <div>Hello</div>
                            </ui-gmap-window>
                            <ui-gmap-marker ng-repeat="m in map.markers" coords="m.coords" icon="m.icon" idkey="m.id" click="onClick(m)">
                            </ui-gmap-marker>
                        </ui-gmap-google-map>
                    </div>
                </div>
            </ion-content>
        </ion-tab>
        <ion-tab title="Attendees" disabled="copytTailgateId==0 || copytTailgateId==undefined">
            <ion-content overflow-scroll="false" class="has-header">
                <div class="container" style="margin-top: 44px;">
                    <div class="expandcollapse-item">
                        <div ng-click="active = !active" ng-class="{'expandcollapse-heading-collapsed': active, 'expandcollapse-heading-expanded': !active}">
                            <p>ADD GROUP</p>
                            <span ng-show="!active" class="ion-chevron-down"></span>
                            <span ng-show="active" class="ion-chevron-right"></span>
                        </div>
                        <div class="slideDown" ng-hide="active">
                            <div class="expand-collapse-content">
                                <div>
                                    <div class="list">
                                        <a class="item item-thumbnail-left item-icon-right eventList" ng-repeat="data in allGroups">
                                            <img class="list-thumbnail listImages" src = 'img/default-group-pic.png';">
                                            <h2 class="eventNameCol_tailgate">{{ data.groupName | uppercase}}</h2>
                                            <p class="dateCol_tailgate">Created By : {{data.createdBy | uppercase}}</p>
                                            <span class="badge span_icon_tailgate"><img src="img/flask_icons/add_new.svg" ng-click="getusersofGroup(data.groupId, $index)"></span>
                                        </a>
                                        <a class="item" ng-if="allGroups.length == 0"> You do not have any group yet. Please search and add group </a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="expandcollapse-item">
                        <div ng-click="active1 = !active1" ng-class="{'expandcollapse-heading-collapsed': active1, 'expandcollapse-heading-expanded': !active1}">
                            <p>ADD FRIENDS</p>
                            <span ng-show="!active1" class="ion-chevron-down"></span>
                            <span ng-show="active1" class="ion-chevron-right"></span>
                        </div>
                        <div class="slideDown" ng-hide="active1">
                            <div class="expand-collapse-content">
                                <div>
                                    <a class="item item-thumbnail-left item-icon-right eventList" ng-repeat="data in myFriends">
                                        <img ng-if="data.friendProfilePicUrl==undefined" class="list-thumbnail listImages" src='img/default-profilepic-copy.png'>
                                        <img ng-if="data.friendProfilePicUrl!=undefined" class="list-thumbnail listImages" src='{{data.friendProfilePicUrl}}' style="border-radius: 50%;
    height: 56px;
    width: 56px;">

                                        <h2 class="eventNameCol_tailgate">{{ data.fullName | uppercase}}</h2>
                                        <p class="dateCol_tailgate">{{ data.emailAddress}}</p>
                                        <span class="badge span_icon_tailgate"><img src="img/flask_icons/add_new.svg" ng-click="addTailgateMembers(data,$index)"></span>
                                    </a>
                                    <a class="item" ng-if="myFriends.length == 0"> You do not have any friends to add. </a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </ion-content>
        </ion-tab>
        <ion-tab title="Plan Now" ng-click="selectTab(3)" disabled="copytTailgateId==0 || copytTailgateId==undefined">
            <!--FOURTH TAB-->
            <ion-content overflow-scroll="false" class="has-header">
                <form class="paynow" style="margin-top: 44px;" name="venmo" novalidate>
                    <div class="tailgateInfo">
                        <div class="item item-input item-floating-label">
                            <span class="input-label">Venmo Account:</span>
                            <input type="text" placeholder="Venmo Account" class="form-control" ng-model="newUpdate.venmoAccountId" name="VenmoAccount"
                                required>
                            <div ng-show="venmo.$submitted || venmo.VenmoAccount.$touched">
                                <span ng-show="venmo.VenmoAccount.$error.required" class="error_msg">Enter your venmo account</span>
                            </div>
                        </div>
                        <div class="item item-input item-floating-label">
                            <span class="input-label">Amount</span>
                            <input type="text" placeholder="Amount" name="Amount" ng-model="newUpdate.amountToPay" valid-number>
                            <div ng-show="venmo.$submitted || venmo.Amount.$touched">
                                <span ng-show="venmo.Amount.$error.required" class="error_msg">Enter Amount</span>
                            </div>
                        </div>
                        <!--<div class="row">
                            <div class="col"><span class="tailgateDescFont">START TIME :</span>{{myTailgate.startTime | date:"h:mma"}}</div>
                            <div class="col"><span class="tailgateDescFont">COST :</span>{{myTailgate.amountToPay | currency}}</div>

                        </div>
                        <div class="row">
                            <div class="col"><div class="tailgateDescFont">EVENT DETAILS</div><span>{{myTailgate.tailgateDescription}}</span></div>
                        </div>-->
                        <div class="row">
                            <button nav-clear class="button button-block button-positive pay_now_button" ng-click="venmo.$valid && updatetailgate(newUpdate);">
                                Save
                            </button>
                        </div>
                    </div>
                </form>


                <div class="strip paddingTOpSupply" ng-click="toggleItem()">
                    <div class="stripPadding">
                        <span><i class="textStyle marginLeftSupplyText"> SUPPLY LIST</i></span>
                        <i class="icon ion-chevron-right" style="float: right;padding-right: 10px;font-size: 26px;margin-top: -5px" ng-if="hideItem==true"></i>
                        <i class="icon ion-chevron-down" style="float: right;padding-right: 10px;font-size: 26px;margin-top: -5px" ng-if="hideItem==false"></i>
                    </div>
                </div>
                <div id="FlaskUsListdiv">
                    <ion-list>
                        <ion-item class="item" ng-repeat="data in allSupplyList">
                            <span class="emailText" style="color: #000000;font-weight: 200"><i class="supplyItemText">{{ data.supplyListName | uppercase}}</i></span>
                            <div>
                                <span class="badge span_icon" style="top:3px" ng-click="selectGameDaySupply(data,data.checked)">
                                   <label class="checkbox"style="float: right">
                                       <input  type="checkbox"ng-model="data.checked">
                                   </label>
                               </span>
                            </div>
                        </ion-item>
                    </ion-list>
                </div>
                <div class="strip paddingTOpSupply" ng-click="toggleSupplyItem()">
                    <div class="stripPadding">
                        <span><i class="textStyle marginLeftSupplyText"> ITEM ASSIGNMENT</i></span>
                        <i class="icon ion-chevron-right" style="float: right;padding-right: 10px;font-size: 26px;margin-top: -5px" ng-if="hideSupplyItem==true"></i>
                        <i class="icon ion-chevron-down" style="float: right;padding-right: 10px;font-size: 26px;margin-top: -5px" ng-if="hideSupplyItem==false"></i>
                    </div>
                </div>
                <div class="list" id="supplyItemDiv">
                    <label class="item item-input item-select" ng-repeat="item in selectedSupplyListItems" style="font-family:inherit;font-size:inherit">
                        <div class="input-label" style="width:60%">
                            <i class="supplyItemText"> {{ item.supplyItemName | uppercase}} </i>

                        </div>
                        <select ng-model="item.itemAssignedUserId" ng-init="item.itemAssignedUserId = (item.itemAssignedUserId == undefined) ? '-1' : item.itemAssignedUserId" style="background:inherit">
                            <option value="-1" >Select attendee</option>
                            <option ng-repeat="attendee in myTailgaters" value="{{attendee.userId}}">{{attendee.userName}}</option>
                        </select>
                    </label>
                </div>

                <div class="list" style="margin-bottom:40px;">
                    <button type="button" nav-clear class="button button-block button-positive pay_now_button" data-ng-click="addSupplyItems();">
                        Add Supply List
                    </button>
                </div>
            </ion-content>
        </ion-tab>
    </ion-tabs>
</ion-view>